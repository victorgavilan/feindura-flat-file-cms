var CodeMirror=(function(){function m(S,a0){var ba={},aV=m.defaults;for(var bp in aV){if(aV.hasOwnProperty(bp)){ba[bp]=(a0&&a0.hasOwnProperty(bp)?a0:aV)[bp];}}var bE=ba.document;var bn=bE.createElement("div");bn.className="CodeMirror";bn.innerHTML='<div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off"></textarea></div><div class="CodeMirror-scroll cm-s-'+ba.theme+'"><div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>';if(S.appendChild){S.appendChild(bn);}else{S(bn);}var bU=bn.firstChild,bR=bU.firstChild,aC=bn.lastChild,aD=aC.firstChild,av=aD.firstChild,bj=av.nextSibling,aN=bj.firstChild,bP=aN.firstChild,aG=aN.nextSibling.firstChild,ab=aG.firstChild,af=ab.nextSibling;if(ba.tabindex!=null){bR.tabindex=ba.tabindex;}if(!ba.gutter&&!ba.lineNumbers){aN.style.display="none";}var aF=new n(),ao=new n(),ae;var bc,bL=[new c("")],a4,a1=new f(),i;bl();var aP={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var a3,bv,ad;var bh,bJ,aI,ak,bH;var be=0,bt=0,bA=0,aM=null;var T,bz;var aH="";bM(function(){ah(ba.value||"");bh=false;})();j(aC,"mousedown",bM(ap));if(!u){j(aC,"contextmenu",am);}j(aD,"dblclick",bM(bd));j(aC,"scroll",function(){ac([]);if(ba.onScroll){ba.onScroll(bI);}});j(window,"resize",function(){ac(true);});j(bR,"keyup",bM(bi));j(bR,"keydown",bM(at));j(bR,"keypress",bM(a7));j(bR,"focus",aB);j(bR,"blur",az);j(aC,"dragenter",function(bW){bW.stop();});j(aC,"dragover",function(bW){bW.stop();});j(aC,"drop",bM(aj));j(aC,"paste",function(){an();bG();});j(bR,"paste",function(){bG();});j(bR,"cut",function(){bG();});var Y;try{Y=(bE.activeElement==bR);}catch(aT){}if(Y){setTimeout(aB,20);}else{az();}function M(bW){return bW>=0&&bW<bL.length;}var bI={getValue:bb,setValue:bM(ah),getSelection:bC,replaceSelection:bM(ai),focus:function(){an();aB();bG();},setOption:function(bW,bX){ba[bW]=bX;if(bW=="lineNumbers"||bW=="gutter"){O();}else{if(bW=="mode"||bW=="indentUnit"){bl();}else{if(bW=="readOnly"&&bX=="nocursor"){bR.blur();}else{if(bW=="theme"){aC.className=aC.className.replace(/cm-s-\w+/,"cm-s-"+bX);}}}}},getOption:function(bW){return ba[bW];},undo:bM(bx),redo:bM(bV),indentLine:bM(function(bW){if(M(bW)){ar(bW,"smart");}}),historySize:function(){return{undo:a1.done.length,redo:a1.undone.length};},matchBrackets:bM(function(){aq(true);}),getTokenAt:function(bW){bW=ag(bW);return bL[bW.line].getTokenAt(bc,aE(bW.line),bW.ch);},getStateAfter:function(bW){bW=aX(bW==null?bL.length-1:bW);return aE(bW+1);},cursorCoords:function(bW){if(bW==null){bW=aP.inverted;}return br(bW?aP.from:aP.to);},charCoords:function(bW){return br(ag(bW));},coordsChar:function(bX){var bY=L(aG);var bW=aX(Math.min(bL.length-1,be+Math.floor((bX.y-bY.top)/bK())));return ag({line:bW,ch:a9(aX(bW),bX.x-bY.left)});},getSearchCursor:function(bX,bY,bW){return new aw(bX,bY,bW);},markText:bM(function(bX,bW,bY){return bM(R(bX,bW,bY));}),setMarker:al,clearMarker:aa,setLineClass:bM(aL),lineInfo:X,addWidget:function(b3,b0,bW,bY){b3=bs(ag(b3));var b2=b3.yBot,b1=b3.x;b0.style.position="absolute";aD.appendChild(b0);b0.style.left=b1+"px";if(bY=="over"){b2=b3.y;}else{if(bY=="near"){var bX=Math.max(aC.offsetHeight,bL.length*bK()),bZ=Math.max(aD.clientWidth,aG.clientWidth)-bk();if(b3.yBot+b0.offsetHeight>bX&&b3.y>b0.offsetHeight){b2=b3.y-b0.offsetHeight;}if(b1+b0.offsetWidth>bZ){b1=bZ-b0.offsetWidth;}}}b0.style.top=(b2+a5())+"px";b0.style.left=(b1+bk())+"px";if(bW){bT(b1,b2,b1+b0.offsetWidth,b2+b0.offsetHeight);}},lineCount:function(){return bL.length;},getCursor:function(bW){if(bW==null){bW=aP.inverted;}return C(bW?aP.from:aP.to);},somethingSelected:function(){return !G(aP.from,aP.to);},setCursor:bM(function(bW,bX){if(bX==null&&typeof bW.line=="number"){aS(bW.line,bW.ch);}else{aS(bW,bX);}}),setSelection:bM(function(bX,bW){bu(ag(bX),ag(bW||bX));}),getLine:function(bW){if(M(bW)){return bL[bW].text;}},setLine:bM(function(bW,bX){if(M(bW)){bm(bX,{line:bW,ch:0},{line:bW,ch:bL[bW].text.length});}}),removeLine:bM(function(bW){if(M(bW)){bm("",{line:bW,ch:0},ag({line:bW+1,ch:0}));}}),replaceRange:bM(bm),getRange:function(bX,bW){return a6(ag(bX),ag(bW));},operation:function(bW){return bM(bW)();},refresh:function(){ac(true);},getInputField:function(){return bR;},getWrapperElement:function(){return bn;},getScrollerElement:function(){return aC;}};function ah(bW){a1=null;var bX={line:0,ch:0};bg(bX,{line:bL.length-1,ch:bL[bL.length-1].text.length},o(bW),bX,bX);a1=new f();}function bb(bY){var bZ=[];for(var bX=0,bW=bL.length;bX<bW;++bX){bZ.push(bL[bX].text);}return bZ.join("\n");}function ap(b3){var bW=ad;ad=null;for(var bZ=b3.target();bZ!=bn;bZ=bZ.parentNode){if(bZ.parentNode==bP){if(ba.onGutterClick){ba.onGutterClick(bI,k(bP.childNodes,bZ)+be);}return b3.stop();}}var bX=Z(b3);switch(b3.button()){case 3:if(u&&!s){am(b3);}return;case 2:if(bX){aS(bX.line,bX.ch,true);}return;}if(!bX){if(b3.target()==aC){b3.stop();}return;}if(!i){aB();}b3.stop();if(bW&&+new Date-bW<400){return aK(bX.line);}aS(bX.line,bX.ch,true);var b5=bX,bY;function b1(){an();bh=true;b0();b2();}function b4(b6){var b8=Z(b6,true);if(b8&&!G(b8,b5)){if(!i){aB();}b5=b8;aO(bX,b8);bh=false;var b7=bN();if(b8.line>=b7.to||b8.line<b7.from){bY=setTimeout(bM(function(){b4(b6);}),150);}}}var b0=j(bE,"mousemove",bM(function(b6){clearTimeout(bY);b6.stop();b4(b6);}),true);var b2=j(bE,"mouseup",bM(function(b6){clearTimeout(bY);var b7=Z(b6);if(b7){aO(bX,b7);}b6.stop();b1();}),true);}function bd(bW){var bX=Z(bW);if(!bX){return;}bf(bX);bW.stop();ad=+new Date;}function aj(b0){b0.e.preventDefault();var b3=Z(b0,true),bX=b0.e.dataTransfer.files;if(!b3||ba.readOnly){return;}if(bX&&bX.length&&window.FileReader&&window.File){function bZ(b6,b5){var b4=new FileReader;b4.onload=function(){b1[b5]=b4.result;if(++bY==b2){bm(b1.join(""),ag(b3),ag(b3));}};b4.readAsText(b6);}var b2=bX.length,b1=Array(b2),bY=0;for(var bW=0;bW<b2;++bW){bZ(bX[bW],bW);}}else{try{var b1=b0.e.dataTransfer.getData("Text");if(b1){bm(b1,b3,b3);}}catch(b0){}}}function at(b0){if(!i){aB();}var bZ=b0.e.keyCode;if(r&&bZ==27){b0.e.returnValue=false;}var bY=(s?b0.e.metaKey:b0.e.ctrlKey)&&!b0.e.altKey,bX=b0.e.ctrlKey||b0.e.altKey||b0.e.metaKey;if(bZ==16||b0.e.shiftKey){a3=a3||(aP.inverted?aP.to:aP.from);}else{a3=null;}if(ba.onKeyEvent&&ba.onKeyEvent(bI,t(b0.e))){return;}if(bZ==33||bZ==34){bD(bZ==34);return b0.stop();}if(bY&&((bZ==36||bZ==35)||s&&(bZ==38||bZ==40))){bO(bZ==36||bZ==38);return b0.stop();}if(bY&&bZ==65){bo();return b0.stop();}if(!ba.readOnly){if(!bX&&bZ==13){return;}if(!bX&&bZ==9&&ax(b0.e.shiftKey)){return b0.stop();}if(bY&&bZ==90){bx();return b0.stop();}if(bY&&((b0.e.shiftKey&&bZ==90)||bZ==89)){bV();return b0.stop();}}aM=(bY?"c":"")+bZ;if(aP.inverted&&H.hasOwnProperty(aM)){var bW=I(bR);if(bW){bv={anchor:bW.start};b(bR,bW.start,bW.start);}}bG(aM);}function bi(bW){if(ba.onKeyEvent&&ba.onKeyEvent(bI,t(bW.e))){return;}if(bv){bv=null;bh=true;}if(bW.e.keyCode==16){a3=null;}}function a7(bY){if(ba.onKeyEvent&&ba.onKeyEvent(bI,t(bY.e))){return;}if(ba.electricChars&&bc.electricChars){var bW=String.fromCharCode(bY.e.charCode==null?bY.e.keyCode:bY.e.charCode);if(bc.electricChars.indexOf(bW)>-1){setTimeout(bM(function(){ar(aP.to.line,"smart");}),50);}}var bX=bY.e.keyCode;if(bX==13){if(!ba.readOnly){ay();}bY.stop();}else{if(!bY.e.ctrlKey&&!bY.e.altKey&&!bY.e.metaKey&&bX==9&&ba.tabMode!="default"){bY.stop();}else{bG(aM);}}}function aB(){if(ba.readOnly=="nocursor"){return;}if(!i){if(ba.onFocus){ba.onFocus(bI);}i=true;if(bn.className.search(/\bCodeMirror-focused\b/)==-1){bn.className+=" CodeMirror-focused";}if(!bH){aA();}}bw();N();}function az(){if(i){if(ba.onBlur){ba.onBlur(bI);}i=false;bn.className=bn.className.replace(" CodeMirror-focused","");}clearInterval(ae);setTimeout(function(){if(!i){a3=null;}},150);}function bg(b3,b2,b0,bX,bW){if(a1){var bY=[];for(var bZ=b3.line,b1=b2.line+1;bZ<b1;++bZ){bY.push(bL[bZ].text);}a1.addChange(b3.line,b0.length,bY);while(a1.done.length>ba.undoDepth){a1.done.shift();}}P(b3,b2,b0,bX,bW);}function aR(b2,b1){var b0=b2.pop();if(b0){var bY=[],bW=b0.start+b0.added;for(var bX=b0.start;bX<bW;++bX){bY.push(bL[bX].text);}b1.push({start:b0.start,added:b0.old.length,old:bY});var bZ=ag({line:b0.start+b0.old.length-1,ch:A(bY[bY.length-1],b0.old[b0.old.length-1])});P({line:b0.start,ch:0},{line:bW-1,ch:bL[bW-1].text.length},b0.old,bZ,bZ);}}function bx(){aR(a1.done,a1.undone);}function bV(){aR(a1.undone,a1.done);}function P(b7,b0,cc,bW,cd){var cb=false,bZ=aH.length;for(var b8=b7.line;b8<=b0.line;++b8){if(bL[b8].text.length==bZ){cb=true;break;}}var b3=b0.line-b7.line,b2=bL[b7.line],bX=bL[b0.line];if(b2==bX){if(cc.length==1){b2.replace(b7.ch,b0.ch,cc[0]);}else{bX=b2.split(b0.ch,cc[cc.length-1]);var b4=[b7.line+1,b3];b2.replace(b7.ch,b2.text.length,cc[0]);for(var b8=1,ca=cc.length-1;b8<ca;++b8){b4.push(new c(cc[b8]));}b4.push(bX);bL.splice.apply(bL,b4);}}else{if(cc.length==1){b2.replace(b7.ch,b2.text.length,cc[0]+bX.text.slice(b0.ch));bL.splice(b7.line+1,b3);}else{var b4=[b7.line+1,b3-1];b2.replace(b7.ch,b2.text.length,cc[0]);bX.replace(0,b0.ch,cc[cc.length-1]);for(var b8=1,ca=cc.length-1;b8<ca;++b8){b4.push(new c(cc[b8]));}bL.splice.apply(bL,b4);}}for(var b8=b7.line,ca=b8+cc.length;b8<ca;++b8){var b6=bL[b8].text;if(b6.length>bZ){aH=b6;bZ=b6.length;cb=false;}}if(cb){bZ=0;aH="";for(var b8=0,ca=bL.length;b8<ca;++b8){var b6=bL[b8].text;if(b6.length>bZ){bZ=b6.length;aH=b6;}}}var bY=[],b1=cc.length-b3-1;for(var b8=0,b6=a4.length;b8<b6;++b8){var b9=a4[b8];if(b9<b7.line){bY.push(b9);}else{if(b9>b0.line){bY.push(b9+b1);}}}if(cc.length<5){a8(b7.line,b7.line+cc.length);bY.push(b7.line+cc.length);}else{bY.push(b7.line);}a4=bY;bQ(100);bJ.push({from:b7.line,to:b0.line+1,diff:b1});aI={from:b7,to:b0,text:cc};function b5(ce){return ce<=Math.min(b0.line,b0.line+b1)?ce:ce+b1;}bu(bW,cd,b5(aP.from.line),b5(aP.to.line));aD.style.height=(bL.length*bK()+2*a5())+"px";}function bm(bX,b0,bZ){b0=ag(b0);if(!bZ){bZ=b0;}else{bZ=ag(bZ);}bX=o(bX);function bY(b3){if(B(b3,b0)){return b3;}if(!B(bZ,b3)){return bW;}var b1=b3.line+bX.length-(bZ.line-b0.line)-1;var b2=b3.ch;if(b3.line==bZ.line){b2+=bX[bX.length-1].length-(bZ.ch-(bZ.line==b0.line?b0.ch:0));}return{line:b1,ch:b2};}var bW;by(bX,b0,bZ,function(b1){bW=b1;return{from:bY(aP.from),to:bY(aP.to)};});return bW;}function ai(bW,bX){by(o(bW),aP.from,aP.to,function(bY){if(bX=="end"){return{from:bY,to:bY};}else{if(bX=="start"){return{from:aP.from,to:aP.from};}else{return{from:aP.from,to:bY};}}});}function by(bZ,b1,b0,bW){var bY=bZ.length==1?bZ[0].length+b1.ch:bZ[bZ.length-1].length;var bX=bW({line:b1.line+bZ.length-1,ch:bY});bg(b1,b0,bZ,bX.from,bX.to);}function a6(b1,b0){var bX=b1.line,bW=b0.line;if(bX==bW){return bL[bX].text.slice(b1.ch,b0.ch);}var bZ=[bL[bX].text.slice(b1.ch)];for(var bY=bX+1;bY<bW;++bY){bZ.push(bL[bY].text);}bZ.push(bL[bW].text.slice(0,b0.ch));return bZ.join("\n");}function bC(){return a6(aP.from,aP.to);}var aW=false;function bw(){if(aW){return;}aF.set(2000,function(){V();bF();if(i){bw();}aJ();});}function bG(bY){var bW=false;aW=true;function bX(){V();var bZ=bF();if(bZ=="moved"&&bY){H[bY]=true;}if(!bZ&&!bW){bW=true;aF.set(80,bX);}else{aW=false;bw();}aJ();}aF.set(20,bX);}function bF(){if(bH){return;}var b3=false,cb=bR.value,cd=I(bR);if(!cd){return false;}var b3=T.text!=cb,b5=bv;var b4=b3||cd.start!=T.start||cd.end!=(b5?T.start:T.end);if(!b4&&!b5){return false;}if(b3){a3=bv=null;if(ba.readOnly){bh=true;return"changed";}}function b0(cj,ch){var ci=0;for(;;){var cg=cb.indexOf("\n",ci);if(cg==-1||(cb.charAt(cg-1)=="\r"?cg-1:cg)>=cj){return{line:ch,ch:cj-ci};}++ch;ci=cg+1;}}var cc=b0(cd.start,T.from),bX=b0(cd.end,T.from);if(b5){var b2=cd.start==b5.anchor?bX:cc;var b6=a3?aP.to:cd.start==b5.anchor?cc:bX;if(aP.inverted=B(b2,b6)){cc=b2;bX=b6;}else{bv=null;cc=b6;bX=b2;}}if(cc.line==bX.line&&cc.line==aP.from.line&&cc.line==aP.to.line&&!a3){bh=false;}if(b3){var b1=0,bZ=cb.length,ce=Math.min(bZ,T.text.length);var cf,b8=T.from,bY=-1;while(b1<ce&&(cf=cb.charAt(b1))==T.text.charAt(b1)){++b1;if(cf=="\n"){b8++;bY=b1;}}var b9=bY>-1?b1-bY:b1,bW=T.to-1,b7=T.text.length;for(;;){cf=T.text.charAt(b7);if(cb.charAt(bZ)!=cf){++bZ;++b7;break;}if(cf=="\n"){bW--;}if(b7<=b1||bZ<=b1){break;}--bZ;--b7;}var bY=T.text.lastIndexOf("\n",b7-1),ca=bY==-1?b7:b7-bY-1;bg({line:b8,ch:b9},{line:bW,ch:ca},o(cb.slice(b1,bZ)),cc,bX);if(b8!=bW||cc.line!=b8){bh=true;}}else{bu(cc,bX);}T.text=cb;T.start=cd.start;T.end=cd.end;return b3?"changed":b4?"moved":false;}function aA(){var bZ=[];var b1=Math.max(0,aP.from.line-1),b0=Math.min(bL.length,aP.to.line+2);for(var bY=b1;bY<b0;++bY){bZ.push(bL[bY].text);}bZ=bR.value=bZ.join(d);var bX=aP.from.ch,bW=aP.to.ch;for(var bY=b1;bY<aP.from.line;++bY){bX+=d.length+bL[bY].text.length;}for(var bY=b1;bY<aP.to.line;++bY){bW+=d.length+bL[bY].text.length;}T={text:bZ,from:b1,to:b0,start:bX,end:bW};b(bR,bX,bv?bX:bW);}function an(){if(ba.readOnly!="nocursor"){bR.focus();}}function aU(){var bW=bs(aP.inverted?aP.from:aP.to);return bT(bW.x,bW.y,bW.x,bW.yBot);}function bT(bY,b2,bW,b1){var b0=bk(),b8=a5(),b4=bK();b2+=b8;b1+=b8;bY+=b0;bW+=b0;var b5=aC.clientHeight,bZ=aC.scrollTop,bX=false,b7=true;if(b2<bZ){aC.scrollTop=Math.max(0,b2-2*b4);bX=true;}else{if(b1>bZ+b5){aC.scrollTop=b1+b4-b5;bX=true;}}var b3=aC.clientWidth,b6=aC.scrollLeft;if(bY<b6){if(bY<50){bY=0;}aC.scrollLeft=Math.max(0,bY-10);bX=true;}else{if(bW>b3+b6){aC.scrollLeft=bW+10-b3;bX=true;if(bW>aD.clientWidth){b7=false;}}}if(bX&&ba.onScroll){ba.onScroll(bI);}return b7;}function bN(){var bW=bK(),bX=aC.scrollTop-a5();return{from:Math.min(bL.length,Math.max(0,Math.floor(bX/bW))),to:Math.min(bL.length,Math.ceil((bX+aC.clientHeight)/bW))};}function ac(cf){if(!aC.clientWidth){be=bt=0;return;}var ce=cf===true?[]:[{from:be,to:bt,domStart:0}];for(var cd=0,b9=cf.length||0;cd<b9;++cd){var b3=cf[cd],b1=[],b4=b3.diff||0;for(var cc=0,ca=ce.length;cc<ca;++cc){var b6=ce[cc];if(b3.to<=b6.from){b1.push({from:b6.from+b4,to:b6.to+b4,domStart:b6.domStart});}else{if(b6.to<=b3.from){b1.push(b6);}else{if(b3.from>b6.from){b1.push({from:b6.from,to:b3.from,domStart:b6.domStart});}if(b3.to<b6.to){b1.push({from:b3.to+b4,to:b6.to+b4,domStart:b6.domStart+(b3.to-b6.from)});}}}}ce=b1;}var bY=bN();var cb=Math.min(be,Math.max(bY.from-3,0)),bW=Math.min(bL.length,Math.max(bt,bY.to+3)),b2=[],b5=0,b0=bt-be,bZ=cb,b8=0;for(var cd=0,b9=ce.length;cd<b9;++cd){var b6=ce[cd];if(b6.to<=cb){continue;}if(b6.from>=bW){break;}if(b6.domStart>b5||b6.from>bZ){b2.push({from:bZ,to:b6.from,domSize:b6.domStart-b5,domStart:b5});b8+=b6.from-bZ;}bZ=b6.to;b5=b6.domStart+(b6.to-b6.from);}if(b5!=b0||bZ!=bW){b8+=Math.abs(bW-bZ);b2.push({from:bZ,to:bW,domSize:b0-b5,domStart:b5});}if(!b2.length){return;}af.style.display="none";if(b8>(bY.to-bY.from)*0.3){aY(cb=Math.max(bY.from-10,0),bW=Math.min(bY.to+7,bL.length));}else{W(b2);}af.style.display="";var b7=cb!=be||bW!=bt||bA!=aC.clientHeight;be=cb;bt=bW;bj.style.top=(cb*bK())+"px";if(b7){bA=aC.clientHeight;aD.style.height=(bL.length*bK()+2*a5())+"px";U();}var bX=aQ(aH);if(bX>aC.clientWidth){aG.style.width=bX+"px";aD.style.width=aC.scrollWidth+"px";}else{aG.style.width=aD.style.width="";}if(af.childNodes.length!=bt-be){throw new Error("BAD PATCH! "+JSON.stringify(b2)+" size="+(bt-be)+" nodes="+af.childNodes.length);}bB();}function aY(b3,b2){var bZ=[],b1={line:b3,ch:0},b0=B(aP.from,b1)&&!B(aP.to,b1);for(var bY=b3;bY<b2;++bY){var bX=null,bW=null;if(b0){bX=0;if(aP.to.line==bY){b0=false;bW=aP.to.ch;}}else{if(aP.from.line==bY){if(aP.to.line==bY){bX=aP.from.ch;bW=aP.to.ch;}else{b0=true;bX=aP.from.ch;}}}bZ.push(bL[bY].getHTML(bX,bW,true));}af.innerHTML=bZ.join("");}function W(b8){var b9=aP.from.line,ca=aP.to.line,bY=0,b6=x&&bE.createElement("div");for(var b4=0,b5=b8.length;b4<b5;++b4){var b1=b8[b4];var b0=(b1.to-b1.from)-b1.domSize;var b7=af.childNodes[b1.domStart+b1.domSize+bY]||null;if(x){for(var b3=Math.max(-b0,b1.domSize);b3>0;--b3){af.removeChild(b7?b7.previousSibling:af.lastChild);}}else{if(b0){for(var b3=Math.max(0,b0);b3>0;--b3){af.insertBefore(bE.createElement("pre"),b7);}for(var b3=Math.max(0,-b0);b3>0;--b3){af.removeChild(b7?b7.previousSibling:af.lastChild);}}}var bZ=af.childNodes[b1.domStart+bY],b2=b9<b1.from&&ca>=b1.from;for(var b3=b1.from;b3<b1.to;++b3){var bX=null,bW=null;if(b2){bX=0;if(ca==b3){b2=false;bW=aP.to.ch;}}else{if(b9==b3){if(ca==b3){bX=aP.from.ch;bW=aP.to.ch;}else{b2=true;bX=aP.from.ch;}}}if(x){b6.innerHTML=bL[b3].getHTML(bX,bW,true);af.insertBefore(b6.firstChild,b7);}else{bZ.innerHTML=bL[b3].getHTML(bX,bW,false);bZ.className=bL[b3].className||"";bZ=bZ.nextSibling;}}bY+=b0;}}function U(){if(!ba.gutter&&!ba.lineNumbers){return;}var bY=bj.offsetHeight,b5=aC.clientHeight;aN.style.height=(bY-b5<2?b5:bY)+"px";var b3=[];for(var b1=be;b1<Math.max(bt,be+1);++b1){var b2=bL[b1].gutterMarker;var b4=ba.lineNumbers?b1+ba.firstLineNumber:null;if(b2&&b2.text){b4=b2.text.replace("%N%",b4!=null?b4:"");}else{if(b4==null){b4="\u00a0";}}b3.push((b2&&b2.style?'<pre class="'+b2.style+'">':"<pre>"),b4,"</pre>");}aN.style.display="none";bP.innerHTML=b3.join("");var b0=String(bL.length).length,bW=bP.firstChild,bX=q(bW),bZ="";while(bX.length+bZ.length<b0){bZ+="\u00a0";}if(bZ){bW.insertBefore(bE.createTextNode(bZ),bW.firstChild);}aN.style.display="";aG.style.marginLeft=aN.offsetWidth+"px";}function bB(){var bY=aP.inverted?aP.from:aP.to,bX=bK();var bW=Q(bY.line,bY.ch)+"px",bZ=(bY.line-be)*bX+"px";bU.style.top=(bY.line*bX-aC.scrollTop)+"px";if(G(aP.from,aP.to)){ab.style.top=bZ;ab.style.left=bW;ab.style.display="";}else{ab.style.display="none";}}function aO(bY,bX){var bW=a3&&ag(a3);if(bW){if(B(bW,bY)){bY=bW;}else{if(B(bX,bW)){bX=bW;}}}bu(bY,bX);}function bu(b0,bZ,bW,bY){if(G(aP.from,b0)&&G(aP.to,bZ)){return;}if(B(bZ,b0)){var bX=bZ;bZ=b0;b0=bX;}if(G(b0,bZ)){aP.inverted=false;}else{if(G(b0,aP.to)){aP.inverted=false;}else{if(G(bZ,aP.from)){aP.inverted=true;}}}if(bW==null){bW=aP.from.line;bY=aP.to.line;}if(G(b0,bZ)){if(!G(aP.from,aP.to)){bJ.push({from:bW,to:bY+1});}}else{if(G(aP.from,aP.to)){bJ.push({from:b0.line,to:bZ.line+1});}else{if(!G(b0,aP.from)){if(b0.line<bW){bJ.push({from:b0.line,to:Math.min(bZ.line,bW)+1});}else{bJ.push({from:bW,to:Math.min(bY,b0.line)+1});}}if(!G(bZ,aP.to)){if(bZ.line<bY){bJ.push({from:Math.max(bW,b0.line),to:bY+1});}else{bJ.push({from:Math.max(b0.line,bY),to:bZ.line+1});}}}}aP.from=b0;aP.to=bZ;ak=true;}function aS(bW,bY,bX){var bZ=ag({line:bW,ch:bY||0});(bX?aO:bu)(bZ,bZ);}function aX(bW){return Math.max(0,Math.min(bW,bL.length-1));}function ag(bY){if(bY.line<0){return{line:0,ch:0};}if(bY.line>=bL.length){return{line:bL.length-1,ch:bL[bL.length-1].text.length};}var bW=bY.ch,bX=bL[bY.line].text.length;if(bW==null||bW>bX){return{line:bY.line,ch:bX};}else{if(bW<0){return{line:bY.line,ch:0};}else{return bY;}}}function bD(bY){var bW=Math.floor(aC.clientHeight/bK()),bX=aP.inverted?aP.from:aP.to;aS(bX.line+(Math.max(bW-1,1)*(bY?1:-1)),bX.ch,true);}function bO(bW){var bX=bW?{line:0,ch:0}:{line:bL.length-1,ch:bL[bL.length-1].text.length};aO(bX,bX);}function bo(){var bW=bL.length-1;bu({line:0,ch:0},{line:bW,ch:bL[bW].text.length});}function bf(bZ){var bX=bL[bZ.line].text;var bY=bZ.ch,bW=bZ.ch;while(bY>0&&/\w/.test(bX.charAt(bY-1))){--bY;}while(bW<bX.length&&/\w/.test(bX.charAt(bW))){++bW;}aO({line:bZ.line,ch:bY},{line:bZ.line,ch:bW});}function aK(bW){aO({line:bW,ch:0},{line:bW,ch:bL[bW].text.length});}function ay(){ai("\n","end");if(ba.enterMode!="flat"){ar(aP.from.line,ba.enterMode=="keep"?"prev":"smart");}}function ax(bW){function bX(b0){if(G(aP.from,aP.to)){return ar(aP.from.line,b0);}var bZ=aP.to.line-(aP.to.ch?1:0);for(var bY=aP.from.line;bY<bZ;++bY){ar(bY,b0);}}a3=null;switch(ba.tabMode){case"default":return false;case"indent":bX("smart");break;case"classic":if(G(aP.from,aP.to)){if(bW){ar(aP.from.line,"smart");}else{ai("\t","end");}break;}case"shift":bX(bW?"subtract":"add");break;}return true;}function ar(bY,b5){if(b5=="smart"){if(!bc.indent){b5="prev";}else{var bW=aE(bY);}}var b6=bL[bY],b0=b6.indentation(),bX=b6.text.match(/^\s*/)[0],b2;if(b5=="prev"){if(bY){b2=bL[bY-1].indentation();}else{b2=0;}}else{if(b5=="smart"){b2=bc.indent(bW,b6.text.slice(bX.length));}else{if(b5=="add"){b2=b0+ba.indentUnit;}else{if(b5=="subtract"){b2=b0-ba.indentUnit;}}}}b2=Math.max(0,b2);var b4=b2-b0;if(!b4){if(aP.from.line!=bY&&aP.to.line!=bY){return;}var b3=bX;}else{var b3="",b1=0;if(ba.indentWithTabs){for(var bZ=Math.floor(b2/p);bZ;--bZ){b1+=p;b3+="\t";}}while(b1<b2){++b1;b3+=" ";}}bm(b3,{line:bY,ch:0},{line:bY,ch:bX.length});}function bl(){bc=m.getMode(ba,ba.mode);for(var bX=0,bW=bL.length;bX<bW;++bX){bL[bX].stateAfter=null;}a4=[0];bQ();}function O(){var bW=ba.gutter||ba.lineNumbers;aN.style.display=bW?"":"none";if(bW){U();}else{af.parentNode.style.marginLeft=0;}}function R(b2,b1,bY){b2=ag(b2);b1=ag(b1);var bW=[];function b0(b3,b7,b6,b4){var b3=bL[b3],b5=b3.addMark(b7,b6,b4);b5.line=b3;bW.push(b5);}if(b2.line==b1.line){b0(b2.line,b2.ch,b1.ch,bY);}else{b0(b2.line,b2.ch,null,bY);for(var bX=b2.line+1,bZ=b1.line;bX<bZ;++bX){b0(bX,0,null,bY);}b0(b1.line,0,b1.ch,bY);}bJ.push({from:b2.line,to:b1.line+1});return function(){var b7,b3;for(var b4=0;b4<bW.length;++b4){var b6=bW[b4],b5=k(bL,b6.line);b6.line.removeMark(b6);if(b5>-1){if(b7==null){b7=b5;}b3=b5;}}if(b7!=null){bJ.push({from:b7,to:b3+1});}};}function al(bW,bY,bX){if(typeof bW=="number"){bW=bL[aX(bW)];}bW.gutterMarker={text:bY,style:bX};U();return bW;}function aa(bW){if(typeof bW=="number"){bW=bL[aX(bW)];}bW.gutterMarker=null;U();}function aL(bW,bX){if(typeof bW=="number"){var bY=bW;bW=bL[aX(bW)];}else{var bY=k(bL,bW);if(bY==-1){return null;}}if(bW.className!=bX){bW.className=bX;bJ.push({from:bY,to:bY+1});}return bW;}function X(bX){if(typeof bX=="number"){var bY=bX;bX=bL[bX];if(!bX){return null;}}else{var bY=k(bL,bX);if(bY==-1){return null;}}var bW=bX.gutterMarker;return{line:bY,text:bX.text,markerText:bW&&bW.text,markerClass:bW&&bW.style};}function aQ(bW){av.innerHTML="<pre><span>x</span></pre>";av.firstChild.firstChild.firstChild.nodeValue=bW;return av.firstChild.firstChild.offsetWidth||10;}function Q(bW,bX){if(bX==0){return 0;}av.innerHTML="<pre><span>"+bL[bW].getHTML(null,null,false,bX)+"</span></pre>";return av.firstChild.firstChild.offsetWidth;}function a9(b8,b2){if(b2<=0){return 0;}var bZ=bL[b8],b5=bZ.text;function b6(b9){av.innerHTML="<pre><span>"+bZ.getHTML(null,null,false,b9)+"</span></pre>";return av.firstChild.firstChild.offsetWidth;}var b3=0,b1=0,b4=b5.length,b0;var bX=Math.min(b4,Math.ceil(b2/aQ("x")));for(;;){var bY=b6(bX);if(bY<=b2&&bX<b4){bX=Math.min(b4,Math.ceil(bX*1.2));}else{b0=bY;b4=bX;break;}}if(b2>b0){return b4;}bX=Math.floor(b4*0.8);bY=b6(bX);if(bY<b2){b3=bX;b1=bY;}for(;;){if(b4-b3<=1){return(b0-b2>b2-b1)?b3:b4;}var b7=Math.ceil((b3+b4)/2),bW=b6(b7);if(bW>b2){b4=b7;b0=bW;}else{b3=b7;b1=bW;}}}function bs(bZ,bY){var bX=bK(),bW=bZ.line-(bY?be:0);return{x:Q(bZ.line,bZ.ch),y:bW*bX,yBot:(bW+1)*bX};}function br(bY){var bW=bs(bY,true),bX=L(aG);return{x:bX.left+bW.x,y:bX.top+bW.y,yBot:bX.top+bW.yBot};}function bK(){var bW=af.childNodes.length;if(bW){return(af.offsetHeight/bW)||1;}av.innerHTML="<pre>x</pre>";return av.firstChild.offsetHeight||1;}function a5(){return aG.offsetTop;}function bk(){return aG.offsetLeft;}function Z(b1,b0){var bZ=L(aC,true),bW,b2;try{bW=b1.e.clientX;b2=b1.e.clientY;}catch(b1){return null;}if(!b0&&(bW-bZ.left>aC.clientWidth||b2-bZ.top>aC.clientHeight)){return null;}var bY=L(aG,true);var bX=be+Math.floor((b2-bY.top)/bK());return ag({line:bX,ch:a9(aX(bX),bW-bY.left)});}function am(bX){var b1=Z(bX);if(!b1||window.opera){return;}if(G(aP.from,aP.to)||B(b1,aP.from)||!B(b1,aP.to)){bM(aS)(b1.line,b1.ch);}var b0=bR.style.cssText;bU.style.position="absolute";bR.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(bX.pageY()-1)+"px; left: "+(bX.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";bH=true;var bZ=bR.value=bC();an();b(bR,0,bR.value.length);function bW(){var b2=o(bR.value).join("\n");if(b2!=bZ){bM(ai)(b2,"end");}bU.style.position="relative";bR.style.cssText=b0;bH=false;aA();bw();}if(u){bX.stop();var bY=j(window,"mouseup",function(){bY();setTimeout(bW,20);},true);}else{setTimeout(bW,50);}}function N(){clearInterval(ae);var bW=true;ab.style.visibility="";ae=setInterval(function(){ab.style.visibility=(bW=!bW)?"":"hidden";},650);}var bS={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function aq(b2){var bW=aP.inverted?aP.from:aP.to,b4=bL[bW.line],bX=bW.ch-1;var b1=(bX>=0&&bS[b4.text.charAt(bX)])||bS[b4.text.charAt(++bX)];if(!b1){return;}var b5=b1.charAt(0),b3=b1.charAt(1)==">",cf=b3?1:-1,ca=b4.styles;for(var cg=bX+1,cc=0,ce=ca.length;cc<ce;cc+=2){if((cg-=ca[cc].length)<=0){var cd=ca[cc+1];break;}}var bZ=[b4.text.charAt(bX)],b9=/[(){}[\]]/;function b7(cs,cn,co){if(!cs.text){return;}var cr=cs.styles,cm=b3?0:cs.text.length-1,cp;for(var cj=b3?0:cr.length-2,cl=b3?cr.length:-2;cj!=cl;cj+=2*cf){var cq=cr[cj];if(cr[cj+1]!=null&&cr[cj+1]!=cd){cm+=cf*cq.length;continue;}for(var ci=b3?0:cq.length-1,ch=b3?cq.length:-1;ci!=ch;ci+=cf,cm+=cf){if(cm>=cn&&cm<co&&b9.test(cp=cq.charAt(ci))){var ck=bS[cp];if(ck.charAt(1)==">"==b3){bZ.push(cp);}else{if(bZ.pop()!=ck.charAt(0)){return{pos:cm,match:false};}else{if(!bZ.length){return{pos:cm,match:true};}}}}}}}for(var cc=bW.line,ce=b3?Math.min(cc+100,bL.length):Math.max(-1,cc-100);cc!=ce;cc+=cf){var b4=bL[cc],b0=cc==bW.line;var b6=b7(b4,b0&&b3?bX+1:0,b0&&!b3?bX:b4.text.length);if(b6){break;}}if(!b6){b6={pos:null,match:false};}var cd=b6.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var cb=R({line:bW.line,ch:bX},{line:bW.line,ch:bX+1},cd),bY=b6.pos!=null?R({line:cc,ch:b6.pos},{line:cc,ch:b6.pos+1},cd):function(){};var b8=bM(function(){cb();bY();});if(b2){setTimeout(b8,800);}else{bz=b8;}}function aZ(b2){var b1,bY;for(var bX=b2,bZ=b2-40;bX>bZ;--bX){if(bX==0){return 0;}var bW=bL[bX-1];if(bW.stateAfter){return bX;}var b0=bW.indentation();if(bY==null||b1>b0){bY=bX;b1=b0;}}return bY;}function aE(b0){var bZ=aZ(b0),bY=bZ&&bL[bZ-1].stateAfter;if(!bY){bY=z(bc);}else{bY=h(bc,bY);}for(var bX=bZ;bX<b0;++bX){var bW=bL[bX];bW.highlight(bc,bY);bW.stateAfter=h(bc,bY);}if(!bL[b0].stateAfter){a4.push(b0);}return bY;}function a8(b0,bX){var bZ=aE(b0);for(var bY=b0;bY<bX;++bY){var bW=bL[bY];bW.highlight(bc,bZ);bW.stateAfter=h(bc,bZ);}}function a2(){var b2=+new Date+ba.workTime;var b6=a4.length;while(a4.length){if(!bL[be].stateAfter){var bZ=be;}else{var bZ=a4.pop();}if(bZ>=bL.length){continue;}var bX=aZ(bZ),bW=bX&&bL[bX-1].stateAfter;if(bW){bW=h(bc,bW);}else{bW=z(bc);}var b1=0,bY=bc.compareStates;for(var b5=bX,b0=bL.length;b5<b0;++b5){var b7=bL[b5],b3=b7.stateAfter;if(+new Date>b2){a4.push(b5);bQ(ba.workDelay);bJ.push({from:bZ,to:b5});return;}var b4=b7.highlight(bc,bW);b7.stateAfter=h(bc,bW);if(bY){if(b3&&bY(b3,bW)){break;}}else{if(b4||!b3){b1=0;}else{if(++b1>3){break;}}}}bJ.push({from:bZ,to:b5});}if(b6&&ba.onHighlightComplete){ba.onHighlightComplete(bI);}}function bQ(bW){if(!a4.length){return;}ao.set(bW,bM(a2));}function V(){bh=null;bJ=[];aI=ak=false;}function aJ(){var bX=false;if(ak){bX=!aU();}if(bJ.length){ac(bJ);}else{if(ak){bB();}}if(bX){aU();}if(ak){N();}if(i&&!bH&&(bh===true||(bh!==false&&ak))){aA();}if(ak&&ba.matchBrackets){setTimeout(bM(function(){if(bz){bz();bz=null;}aq(false);}),20);}var bW=aI;if(ak&&ba.onCursorActivity){ba.onCursorActivity(bI);}if(bW&&ba.onChange&&bI){ba.onChange(bI,bW);}}var au=0;function bM(bW){return function(){if(!au++){V();}try{var bX=bW.apply(this,arguments);}finally{if(!--au){aJ();}}return bX;};}function aw(bY,b0,bX){this.atOccurrence=false;if(bX==null){bX=typeof bY=="string"&&bY==bY.toLowerCase();}if(b0&&typeof b0=="object"){b0=ag(b0);}else{b0={line:0,ch:0};}this.pos={from:b0,to:b0};if(typeof bY!="string"){this.matches=function(b3,b7){if(b3){var b1=bL[b7.line].text.slice(0,b7.ch),b2=b1.match(bY),b6=0;while(b2){var b4=b1.indexOf(b2[0]);b6+=b4;b1=b1.slice(b4+1);var b5=b1.match(bY);if(b5){b2=b5;}else{break;}b6++;}}else{var b1=bL[b7.line].text.slice(b7.ch),b2=b1.match(bY),b6=b2&&b7.ch+b1.indexOf(b2[0]);}if(b2){return{from:{line:b7.line,ch:b6},to:{line:b7.line,ch:b6+b2[0].length},match:b2};}};}else{if(bX){bY=bY.toLowerCase();}var bW=bX?function(b1){return b1.toLowerCase();}:function(b1){return b1;};var bZ=bY.split("\n");if(bZ.length==1){this.matches=function(b4,b5){var b2=bW(bL[b5.line].text),b1=bY.length,b3;if(b4?(b5.ch>=b1&&(b3=b2.lastIndexOf(bY,b5.ch-b1))!=-1):(b3=b2.indexOf(bY,b5.ch))!=-1){return{from:{line:b5.line,ch:b3},to:{line:b5.line,ch:b3+b1}};}};}else{this.matches=function(b6,b8){var b7=b8.line,b9=(b6?bZ.length-1:0),b4=bZ[b9],ca=bW(bL[b7].text);var b5=(b6?ca.indexOf(b4)+b4.length:ca.lastIndexOf(b4));if(b6?b5>=b8.ch||b5!=b4.length:b5<=b8.ch||b5!=ca.length-b4.length){return;}for(;;){if(b6?!b7:b7==bL.length-1){return;}ca=bW(bL[b7+=b6?-1:1].text);b4=bZ[b6?--b9:++b9];if(b9>0&&b9<bZ.length-1){if(ca!=b4){return;}else{continue;}}var b3=(b6?ca.lastIndexOf(b4):ca.indexOf(b4)+b4.length);if(b6?b3!=ca.length-b4.length:b3!=b4.length){return;}var b1={line:b8.line,ch:b5},b2={line:b7,ch:b3};return{from:b6?b2:b1,to:b6?b1:b2};}};}}}aw.prototype={findNext:function(){return this.find(false);},findPrevious:function(){return this.find(true);},find:function(bX){var bW=this,bZ=ag(bX?this.pos.from:this.pos.to);function bY(b0){var b1={line:b0,ch:0};bW.pos={from:b1,to:b1};bW.atOccurrence=false;return false;}for(;;){if(this.pos=this.matches(bX,bZ)){this.atOccurrence=true;return this.pos.match||true;}if(bX){if(!bZ.line){return bY(0);}bZ={line:bZ.line-1,ch:bL[bZ.line-1].text.length};}else{if(bZ.line==bL.length-1){return bY(bL.length);}bZ={line:bZ.line+1,ch:0};}}},from:function(){if(this.atOccurrence){return C(this.pos.from);}},to:function(){if(this.atOccurrence){return C(this.pos.to);}},replace:function(bX){var bW=this;if(this.atOccurrence){bM(function(){bW.pos.to=bm(bX,bW.pos.from,bW.pos.to);})();}}};for(var bq in D){if(D.propertyIsEnumerable(bq)&&!bI.propertyIsEnumerable(bq)){bI[bq]=D[bq];}}return bI;}m.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null,document:window.document};var J={},y={};m.defineMode=function(i,M){if(!m.defaults.mode&&i!="null"){m.defaults.mode=i;}J[i]=M;};m.defineMIME=function(M,i){y[M]=i;};m.getMode=function(N,i){if(typeof i=="string"&&y.hasOwnProperty(i)){i=y[i];}if(typeof i=="string"){var P=i,M={};}else{if(i!=null){var P=i.name,M=i;}}var O=J[P];if(!O){if(window.console){console.warn("No mode "+P+" found, falling back to plain text.");}return m.getMode(N,"text/plain");}return O(N,M||{});};m.listModes=function(){var M=[];for(var i in J){if(J.propertyIsEnumerable(i)){M.push(i);}}return M;};m.listMIMEs=function(){var M=[];for(var i in y){if(y.propertyIsEnumerable(i)){M.push(i);}}return M;};var D={};m.defineExtension=function(i,M){D[i]=M;};m.fromTextArea=function(M,O){if(!O){O={};}O.value=M.value;if(!O.tabindex&&M.tabindex){O.tabindex=M.tabindex;}function Q(){M.value=i.getValue();}if(M.form){var P=j(M.form,"submit",Q,true);if(typeof M.form.submit=="function"){var N=M.form.submit;function R(){Q();M.form.submit=N;M.form.submit();M.form.submit=R;}M.form.submit=R;}}M.style.display="none";var i=m(function(S){M.parentNode.insertBefore(S,M.nextSibling);},O);i.save=Q;i.toTextArea=function(){Q();M.parentNode.removeChild(i.getWrapperElement());M.style.display="";if(M.form){P();if(typeof M.form.submit=="function"){M.form.submit=N;}}};return i;};function h(O,i){if(i===true){return i;}if(O.copyState){return O.copyState(i);}var N={};for(var P in i){var M=i[P];if(M instanceof Array){M=M.concat([]);}N[P]=M;}return N;}m.startState=z;function z(N,M,i){return N.startState?N.startState(M,i):true;}m.copyState=h;function a(i){this.pos=this.start=0;this.string=i;}a.prototype={eol:function(){return this.pos>=this.string.length;},sol:function(){return this.pos==0;},peek:function(){return this.string.charAt(this.pos);},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++);}},eat:function(i){var N=this.string.charAt(this.pos);if(typeof i=="string"){var M=N==i;}else{var M=N&&(i.test?i.test(N):i(N));}if(M){++this.pos;return N;}},eatWhile:function(i){var M=this.start;while(this.eat(i)){}return this.pos>M;},eatSpace:function(){var i=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos;}return this.pos>i;},skipToEnd:function(){this.pos=this.string.length;},skipTo:function(i){var M=this.string.indexOf(i,this.pos);if(M>-1){this.pos=M;return true;}},backUp:function(i){this.pos-=i;},column:function(){return g(this.string,this.start);},indentation:function(){return g(this.string);},match:function(O,M,i){if(typeof O=="string"){function P(Q){return i?Q.toLowerCase():Q;}if(P(this.string).indexOf(P(O),this.pos)==this.pos){if(M!==false){this.pos+=O.length;}return true;}}else{var N=this.string.slice(this.pos).match(O);if(N&&M!==false){this.pos+=N[0].length;}return N;}},current:function(){return this.string.slice(this.start,this.pos);}};m.StringStream=a;function c(M,i){this.styles=i||[M,null];this.stateAfter=null;this.text=M;this.marked=this.gutterMarker=this.className=null;}c.prototype={replace:function(R,S,V){var W=[],P=this.marked;K(0,R,this.styles,W);if(V){W.push(V,null);}K(S,this.text.length,this.styles,W);this.styles=W;this.text=this.text.slice(0,R)+V+this.text.slice(S);this.stateAfter=null;if(P){var T=V.length-(S-R),N=this.text.length;function Q(i){return i<=Math.min(S,S+T)?i:i+T;}for(var O=0;O<P.length;++O){var M=P[O],U=false;if(M.from>=N){U=true;}else{M.from=Q(M.from);if(M.to!=null){M.to=Q(M.to);}}if(U||M.from>=M.to){P.splice(O,1);O--;}}}},split:function(N,M){var i=[M,null];K(N,this.text.length,this.styles,i);return new c(M+this.text.slice(N),i);},addMark:function(P,O,M){var i=this.marked,N={from:P,to:O,style:M};if(this.marked==null){this.marked=[];}this.marked.push(N);this.marked.sort(function(R,Q){return R.from-Q.from;});return N;},removeMark:function(O){var M=this.marked;if(!M){return;}for(var N=0;N<M.length;++N){if(M[N]==O){M.splice(N,1);break;}}},highlight:function(Q,M){var S=new a(this.text),U=this.styles,R=0;var P=false,N=U[0],T;if(this.text==""&&Q.blankLine){Q.blankLine(M);}while(!S.eol()){var i=Q.token(S,M);var O=this.text.slice(S.start,S.pos);S.start=S.pos;if(R&&U[R-1]==i){U[R-2]+=O;}else{if(O){if(!P&&(U[R+1]!=i||(R&&U[R-2]!=T))){P=true;}U[R++]=O;U[R++]=i;T=N;N=U[R];}}if(S.pos>5000){U[R++]=this.text.slice(S.pos);U[R++]=null;break;}}if(U.length!=R){U.length=R;P=true;}if(R&&U[R-2]!=T){P=true;}return P||(U.length<5&&this.text.length<10);},getTokenAt:function(Q,O,N){var i=this.text,P=new a(i);while(P.pos<N&&!P.eol()){P.start=P.pos;var M=Q.token(P,O);}return{start:P.start,end:P.pos,string:P.current(),className:M||null,state:O};},indentation:function(){return g(this.text);},getHTML:function(Y,ac,P,aa){var S=[];if(P){S.push(this.className?'<pre class="'+this.className+'">':"<pre>");}function ad(al,i){if(!al){return;}if(i){S.push('<span class="cm-',i,'">',v(al),"</span>");}else{S.push(v(al));}}var X=this.styles,Q=this.text,W=this.marked;if(Y==ac){Y=null;}var af=Q.length;if(aa!=null){af=Math.min(aa,af);}if(!Q&&aa==null){ad(" ",Y!=null&&ac==null?"CodeMirror-selected":null);}else{if(!W&&Y==null){for(var ae=0,T=0;T<af;ae+=2){var Z=X[ae],ab=Z.length;if(T+ab>af){Z=Z.slice(0,af-T);}T+=ab;ad(Z,X[ae+1]);}}else{var O=0,ae=0,V="",ag,aj=0;var ah=-1,R=null;function ai(){if(W){ah+=1;R=(ah<W.length)?W[ah]:null;}}ai();while(O<af){var U=af;var ak="";if(Y!=null){if(Y>O){U=Y;}else{if(ac==null||ac>O){ak=" CodeMirror-selected";if(ac!=null){U=Math.min(U,ac);}}}}while(R&&R.to!=null&&R.to<=O){ai();}if(R){if(R.from>O){U=Math.min(U,R.from);}else{ak+=" "+R.style;if(R.to!=null){U=Math.min(U,R.to);}}}for(;;){var N=O+V.length;var M=ag;if(ak){M=ag?ag+ak:ak;}ad(N>U?V.slice(0,U-O):V,M);if(N>=U){V=V.slice(U-O);O=U;break;}O=N;V=X[ae++];ag=X[ae++];}}if(Y!=null&&ac==null){ad(" ","CodeMirror-selected");}}}if(P){S.push("</pre>");}return S.join("");}};function K(S,T,M,U){for(var Q=0,R=0,N=0;R<T;Q+=2){var O=M[Q],P=R+O.length;if(N==0){if(P>S){U.push(O.slice(S-R,Math.min(O.length,T-R)),M[Q+1]);}if(P>=S){N=1;}}else{if(N==1){if(P>T){U.push(O.slice(0,T-R),M[Q+1]);}else{U.push(O,M[Q+1]);}}}R=P;}}function f(){this.time=0;this.done=[];this.undone=[];}f.prototype={addChange:function(T,O,M){this.undone.length=0;var S=+new Date,Q=this.done[this.done.length-1];if(S-this.time>400||!Q||Q.start>T+O||Q.start+Q.added<T-Q.added+Q.old.length){this.done.push({start:T,added:O,old:M});}else{var P=0;if(T<Q.start){for(var N=Q.start-T-1;N>=0;--N){Q.old.unshift(M[N]);}Q.added+=Q.start-T;Q.start=T;}else{if(Q.start<T){P=T-Q.start;O+=P;}}for(var N=Q.added-P,R=M.length;N<R;++N){Q.old.push(M[N]);}if(Q.added<O){Q.added=O;}}this.time=S;}};function E(){if(this.preventDefault){this.preventDefault();this.stopPropagation();}else{this.returnValue=false;this.cancelBubble=true;}}function t(i){if(!i.stop){i.stop=E;}return i;}function w(i){this.e=i;}w.prototype={stop:function(){E.call(this.e);},target:function(){return this.e.target||this.e.srcElement;},button:function(){if(this.e.which){return this.e.which;}else{if(this.e.button&1){return 1;}else{if(this.e.button&2){return 3;}else{if(this.e.button&4){return 2;}}}}},pageX:function(){if(this.e.pageX!=null){return this.e.pageX;}var i=this.target().ownerDocument;return this.e.clientX+i.body.scrollLeft+i.documentElement.scrollLeft;},pageY:function(){if(this.e.pageY!=null){return this.e.pageY;}var i=this.target().ownerDocument;return this.e.clientY+i.body.scrollTop+i.documentElement.scrollTop;}};function j(O,N,M,i){function P(Q){M(new w(Q||window.event));}if(typeof O.addEventListener=="function"){O.addEventListener(N,P,false);if(i){return function(){O.removeEventListener(N,P,false);};}}else{O.attachEvent("on"+N,P);if(i){return function(){O.detachEvent("on"+N,P);};}}}function n(){this.id=null;}n.prototype={set:function(i,M){clearTimeout(this.id);this.id=setTimeout(M,i);}};var x=(function(){var i=document.createElement("pre");i.innerHTML=" ";return !i.innerHTML;})();var u=/gecko\/\d{7}/i.test(navigator.userAgent);var r=/MSIE \d/.test(navigator.userAgent);var e=/Apple Computer/.test(navigator.vendor);var d="\n";(function(){var i=document.createElement("textarea");i.value="foo\nbar";if(i.value.indexOf("\r")>-1){d="\r\n";}}());var p=8;var s=/Mac/.test(navigator.platform);var H={};for(var F=35;F<=40;++F){H[F]=H["c"+F]=true;}function g(N,M){if(M==null){M=N.search(/[^\s\u00a0]/);if(M==-1){M=N.length;}}for(var O=0,P=0;O<M;++O){if(N.charAt(O)=="\t"){P+=p-(P%p);}else{++P;}}return P;}function l(i){if(i.currentStyle){return i.currentStyle;}return window.getComputedStyle(i,null);}function L(O,N){var Q=O.ownerDocument.body;var M=0,S=0,i=false;for(var R=O;R;R=R.offsetParent){M+=R.offsetLeft;S+=R.offsetTop;if(N&&l(R).position=="fixed"){i=true;}}var P=N&&!i?null:Q;for(var R=O.parentNode;R!=P;R=R.parentNode){if(R.scrollLeft!=null){M-=R.scrollLeft;S-=R.scrollTop;}}return{left:M,top:S};}function q(i){return i.textContent||i.innerText||i.nodeValue||"";}function G(M,i){return M.line==i.line&&M.ch==i.ch;}function B(M,i){return M.line<i.line||(M.line==i.line&&M.ch<i.ch);}function C(i){return{line:i.line,ch:i.ch};}function v(i){return i.replace(/[<>&]/g,function(M){return M=="&"?"&amp;":M=="<"?"&lt;":"&gt;";});}m.htmlEscape=v;function A(P,O){if(!O){return P?P.length:0;}if(!P){return O.length;}for(var N=P.length,M=O.length;N>=0&&M>=0;--N,--M){if(P.charAt(N)!=O.charAt(M)){break;}}return M+1;}function k(P,M){if(P.indexOf){return P.indexOf(M);}for(var N=0,O=P.length;N<O;++N){if(P[N]==M){return N;}}return -1;}var o,I,b;if("\n\nb".split(/\n/).length!=3){o=function(N){var O=0,M,i=[];while((M=N.indexOf("\n",O))>-1){i.push(N.slice(O,N.charAt(M-1)=="\r"?M-1:M));O=M+1;}i.push(N.slice(O));return i;};}else{o=function(i){return i.split(/\r?\n/);};}m.splitLines=o;if(window.getSelection){I=function(M){try{return{start:M.selectionStart,end:M.selectionEnd};}catch(i){return null;}};if(e){b=function(M,N,i){if(N==i){M.setSelectionRange(N,i);}else{M.setSelectionRange(N,i-1);window.getSelection().modify("extend","forward","character");}};}else{b=function(N,O,i){try{N.setSelectionRange(O,i);}catch(M){}};}}else{I=function(O){try{var S=O.ownerDocument.selection.createRange();}catch(U){return null;}if(!S||S.parentElement()!=O){return null;}var N=O.value,T=N.length,V=O.createTextRange();V.moveToBookmark(S.getBookmark());var Q=O.createTextRange();Q.collapse(false);if(V.compareEndPoints("StartToEnd",Q)>-1){return{start:T,end:T};}var M=-V.moveStart("character",-T);for(var R=N.indexOf("\r");R>-1&&R<M;R=N.indexOf("\r",R+1),M++){}if(V.compareEndPoints("EndToEnd",Q)>-1){return{start:M,end:T};}var P=-V.moveEnd("character",-T);for(var R=N.indexOf("\r");R>-1&&R<P;R=N.indexOf("\r",R+1),P++){}return{start:M,end:P};};b=function(Q,S,N){var O=Q.createTextRange();O.collapse(true);var M=O.duplicate();var P=0,i=Q.value;for(var R=i.indexOf("\n");R>-1&&R<S;R=i.indexOf("\n",R+1)){++P;}O.move("character",S-P);for(;R>-1&&R<N;R=i.indexOf("\n",R+1)){++P;}M.move("character",N-P);O.setEndPoint("EndToEnd",M);O.select();};}m.defineMode("null",function(){return{token:function(i){i.skipToEnd();}};});m.defineMIME("text/plain","null");return m;})();