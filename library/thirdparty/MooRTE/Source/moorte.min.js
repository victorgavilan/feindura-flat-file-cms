var loopStop=0;Browser.webkit=Browser.safari||Browser.chrome;Object.extend("set",function(a,b){var c={};c[a]=b;return c});
var MooRTE=new Class({Implements:[Options],options:{floating:true,padFloat:true,where:"before",stretch:false,location:"elements",buttons:"div.Menu:[Main,File,Insert]",skin:"Word03",elements:"textarea, .rte"},initialize:function(a){this.setOptions(a);var b,c=this,d=$$(this.options.elements),f=this.options.location.substr(4,1).toLowerCase();MooRTE.activeField||MooRTE.extend({ranges:{},btnVals:[],activeField:"",activeBar:""});Browser.ie||MooRTE.btnVals.push("unselectable");d.each(function(e,i){if("textarea,input".contains(e.get("tag"),
","))d[i]=e=c.textArea(e);if(f=="e"||!b)b=c.insertToolbar(f);if("bt".contains(f))e.set("contentEditable",true);else f=="e"?c.positionToolbar(e,b):MooRTE.Utilities.addEvents(e.set("contentEditable",true),{focus:function(){c.positionToolbar(e,b)},blur:function(){this.setStyle("padding-top",this.getStyle("padding-top").slice(0,-2)-b.getFirst().getSize().y).removeClass("rteShow");b.addClass("rteHide")}});e.store("bar",b);MooRTE.Utilities.addEvents(e,{keydown:MooRTE.Utilities.shortcuts,keyup:MooRTE.Utilities.updateBtns,
mouseup:MooRTE.Utilities.updateBtns,focus:function(){MooRTE.activeField=this;MooRTE.activeBar=b}});MooRTE.Utilities.addEvents(b,{mouseup:MooRTE.Utilities.updateBtns})});b.store("fields",d);MooRTE.activeField=d[0];MooRTE.activeBar=MooRTE.activeField.retrieve("bar");if(f=="t")b.addClass("rtePageTop").getFirst().addClass("rteTopDown");else f=="b"&&b.addClass("rtePageBottom");Browser.firefox&&MooRTE.Utilities.exec("styleWithCSS")},insertToolbar:function(a){a=(new Element("div",{"class":"rteRemove MooRTE "+
(!a||a=="n"?"rteHide":""),contentEditable:false})).adopt(new Element("div",{"class":"RTE "+this.options.skin})).inject(document.body);MooRTE.activeBar=a;MooRTE.Utilities.addElements(this.options.buttons,[a.getFirst(),"bottom"]);return a},positionToolbar:function(a,b){a.set("contentEditable",true).addClass("rteShow");var c=this.options,d=a.getCoordinates(),f=a.addClass("rte"+(c.stretch?"":"No")+"Stretch").getStyle("border-width").match(/(\d)/g);f=b.removeClass("rteHide").setStyle("width",d.width-(c.floating?
0:f[1]*1+f[3]*1)).getFirst().getCoordinates().height;if(c.floating){var e={before:"margin-top",after:"margin-after",top:"padding-top",bottom:"padding-bottom"}[c.where];a.setStyle(e,parseInt(a.getStyle(e))+f);c.padFloat||a.setStyle("min-height",d.height-f).setStyle("height",d.height-f);b.setStyles({left:d.left,top:d.top-f>0?d.top:d.bottom}).addClass("rteFloat").getFirst().addClass("rteFloat")}else a.setStyle("padding-top",a.getStyle("padding-top").slice(0,-2)*1+f).grab(b,"top")},textArea:function(a){var b=
(new Element("div",{text:a.get("value"),"class":"rteTextArea "+a.get("class"),styles:{width:a.getSize().x}})).setStyle(Browser.ie?"height":"min-height",a.getSize().y).store("src",a).replaces(a);a.store("new",b);var c=a.getParent("form");c&&MooRTE.Utilities.addEvents(c,{submit:function(){a.set("value",MooRTE.Utilities.clean(b)).replaces(b)}});return b}});
MooRTE.Range={create:function(a){var b=window.document.selection||window.getSelection();if(!b||b.getRangeAt&&!b.rangeCount)return null;return MooRTE.ranges[a||"a1"]=b.getRangeAt?b.getRangeAt(0):b.createRange()},get:function(a,b){b||(b=MooRTE.Range.create());switch(a){case "text":return b.text||b.toString();case "node":return b.cloneContents?b.cloneContents():new Element("div",{html:b.htmlText});default:case "html":var c=b.htmlText;if(!c){c=b.cloneContents();MooRTE.Range.content.empty().appendChild(c);
c=MooRTE.Range.content.innerHTML}return c}},set:function(a){a=MooRTE.ranges[a||"a1"];if(a.select)a.select();else{var b=window.getSelection();b.removeAllRanges();b.addRange(a)}return MooRTE.Range},insert:function(a,b){if(Browser.ie){b||(b=MooRTE.Range.create());b.pasteHTML(a)}else MooRTE.Utilities.exec("insertHTML",a);return MooRTE.Range},wrap:function(a,b,c){c||(c=MooRTE.Range.create());a=new Element(a,b);try{Browser.ie?c.pasteHTML(a.set("html",c.htmlText).outerHTML):c.surroundContents(a)}catch(d){if(d.code==
1)return false}return a},wrapText:function(a,b){var c=b.getParent(".RTE").getElement("textarea");if(a.substr(0,1)!="<")a='<span style="'+a+'">';if(Browser.ie){e=new Element(a||"span",{html:range.get()});range.pasteHTML(e)}else{var d=c.selectionStart,f=RegExp("(.{"+d+"})(.{"+(c.selectionEnd-d)+"})(.*)","m").exec(c.get("value")),e=a+f[2]+"</"+a.match(/^<(\w+)/)[1]+">";c.set("value",f[1]+e+f[3]).selectionEnd=d+e.length}return MooRTE.Range},replace:function(a,b){b||(b=MooRTE.Range.create());if(Browser.ie){var c=
document.uniqueID;b.pasteHTML("<span id='"+c+"'></span>");a.replaces(document.id(c))}else MooRTE.Utilities.exec("inserthtml",a)},parent:function(a){if(!(a=a||MooRTE.Range.create()))return false;return Browser.ie?typeOf(a)=="object"?a.parentElement():a:a.commonAncestorContainer}};(function(){if(Browser.firefox)MooRTE.Range.selection=window.getSelection();if(!Browser.ie)MooRTE.Range.content=new Element("div")})();MooRTE.Tabs={};
MooRTE.Utilities={exec:function(){var a=Array.from(arguments).flatten();document.execCommand(a[0],a[2]||null,a[1]||false)},shortcuts:function(a){if(a.key=="enter"){if(!Browser.ie)return;a.stop();return MooRTE.Range.insert("<br/>")}var b=MooRTE.activeBar.retrieve("shortcuts");if(a&&a.control&&b[a.key]){a.stop();a=MooRTE.activeBar.getElement(".rte"+b[a.key]);a.fireEvent("mousedown",a)}},updateBtns:function(){var a,b=MooRTE.activeBar.retrieve("update");if(b!==null){b.state.each(function(c){if(c[2])c[2].call(c[1],
c[0]);else{try{a=window.document.queryCommandState(c[0])}catch(d){a=false}c[1][(a?"add":"remove")+"Class"]("rteSelected")}});b.value.each(function(c){(a=window.document.queryCommandValue(c[0]))&&c[2].call(c[1],c[0],a)});b.custom.each(function(){vals[2].call(vals[1],vals[0])});Browser.firefox&&MooRTE.Range.selection.anchorNode.id=="rteMozFix"&&MooRTE.Range.selection.extend(MooRTE.Range.selection.anchorNode.parentNode,0)}},addEvents:function(a,b){Object.append(a.retrieve("rteEvents",{}),b);a.addEvents(b)},
removeEvents:function(a,b){Object.each(a.retrieve("rteEvents",{}),function(c,d){a.removeEvent(d,c)});b&&a.eliminate("rteEvents")},eventHandler:function(a,b,c){if(typeOf(a)!="null"){var d=MooRTE.Elements[c][a];switch(typeOf(d)){case "function":d.call(b,c,a);break;case "array":d=Array.clone(d).each(function(f){MooRTE.eventHandler(f,b,c)});break;case "object":Object.every(Object.clone(d),function(f,e){var i=Array.from(f).append([c,a]);MooRTE.Utilities[e].apply(b,i)});break;case "string":a=="source"&&
a.substr(0,2)!="on"?MooRTE.Range.wrapText(d,b):MooRTE.Utilities.eventHandler(d,b,c)}}},addElements:function(a,b,c){MooRTE.btnVals.args||MooRTE.btnVals.combine(["args","shortcut","element","onClick","img","onLoad","source","contains"]);if(b){if(Type.isArray(b)){var d=b[1];b=b[0]}}else b=MooRTE.activeBar.getFirst();c||(c={});if(Type.isString(a)){a=a.replace(/'([^']*)'|"([^"]*)"|([^{}:,\][\s]+)/gm,"'$1$2$3'");a=a.replace(/((?:[,[:]|^)\s*)('[^']+'\s*:\s*'[^']+'\s*(?=[\],}]))/gm,"$1{$2}");for(a=a.replace(/((?:[,[:]|^)\s*)('[^']+'\s*:\s*{[^{}]+})/gm,
"$1{$2}");a!=(a=a.replace(/((?:[,[]|^)\s*)('[^']+'\s*:\s*\[(?:(?=([^\],\[]+))\3|\]}|[,[](?!\s*'[^']+'\s*:\s*\[([^\]]|\]})+\]))*\](?!}))/gm,"$1{$2}")););a=JSON.decode("["+a+"]")}var f=[],e=0;do{if(f.length){a=f;f=[]}Array.from(a).each(function(g){switch(typeOf(g)){case "string":case "element":f.push(g);break;case "object":Object.each(g,function(l,m){f.push(Object.set(m,l))});break;case "array":g.each(function(l){f.push(l)});e=g.length}})}while(e);var i=[],j=b.hasClass("MooRTE")?b:b.getParent(".MooRTE");
f.each(function(g){if(Type.isObject(g)){var l=Object.values(g)[0];g=Object.keys(g)[0]}if(Type.isElement(g))var m=g;else if(MooRTE.Elements[g])var n=b["get"+({before:"Previous",after:"Next",top:"First"}[d]||"Last")](".rte"+g);else m=new Element(g);if(m)n=m.inject(b,d);else if(!n||!c.ifExists){var k=MooRTE.Elements[g],r=k.element&&k.element.toLowerCase()=="textarea",q="text,password,submit,button,checkbox,file,hidden,image,radio,reset".contains(k.type);m=/bold|italic|underline|strikethrough|unlink|(sub|super)script|insert(un)?orderedlist|justify(left|full|right|center)/i.test(g);
var u=Object.append({href:"javascript:void(0)",unselectable:q||r?"off":"on",title:g+(k.shortcut?" (Ctrl+"+k.shortcut.capitalize()+")":""),styles:k.img?isNaN(k.img)?{"background-image":"url("+k.img+")"}:{"background-position":"0 "+-20*k.img+"px"}:{},events:{mousedown:function(o){MooRTE.activeBar=j;var s=j.retrieve("source"),t=j.retrieve("fields"),p=MooRTE.Range.parent();if(Browser.webkit&&p.nodeType==3)p=p.parentElement;if(!(t.contains(MooRTE.activeField)&&MooRTE.activeField.contains(p)))(MooRTE.activeField=
t[0]).focus();if(o&&o.stop)q||r?o.stopPropagation():o.stop();!k.onClick&&!s&&(!k.element||k.element=="a")?MooRTE.Utilities.exec(k.args||g):MooRTE.Utilities.eventHandler(s||"onClick",this,g)}}},k);MooRTE.btnVals[k.element?"include":"erase"]("href").each(function(o){delete u[o]});n=(new Element((q&&!k.element?"input":k.element||"a")+".rte"+g,u)).inject(b,d);if(k.onUpdate||m)j.retrieve("update",{value:[],state:[],custom:[]})[/font(name|size)|(back|fore|hilite)color/i.test(g)?"value":m?"state":"custom"].push([g,
n,k.onUpdate]);if(k.shortcut)j.retrieve("shortcuts",{})[k.shortcut]=g;MooRTE.Utilities.eventHandler("onLoad",n,g)}if((l=l||k&&k.contains)&&!(c.ifExists=="stop"&&!k))MooRTE.Utilities.addElements(l,n,c.inherit?c:{});n.removeClass("rteHide");i.push(n)});return i[1]?i:i[0]},tabs:function(a){var b=Array.from(arguments),c=b.splice(-2).shift(),d=b[2]||{},f=MooRTE.Tabs[a];if(f)Object.each(f,function(e){e[0]&&e[0].removeClass("rteSelected");e[1]&&e[1].addClass("rteHide");d.onHide&&MooRTE.Utilities.eventHandler(d.onHide,
this,c)},this);else MooRTE.Tabs[a]={};this.addClass("rteSelected").addClass("rteGroupBtn_"+c);if(f=MooRTE.Tabs[a][c]){f[0]||(f[0]=this);return f[1].removeClass("rteHide")}if(b[1]){if(Type.isString(d.place))d.place=this.getParent(".MooRTE").getElement(".rte"+d.place);b=MooRTE.Utilities.addElements(b[1],d.place,{className:"rteGroup_"+c});MooRTE.Tabs[a][c]=[this,b];MooRTE.Utilities.eventHandler(d.onShow,this,c)}},addTab:function(a,b){MooRTE.Tabs[a]||(MooRTE.Tabs[a]={});MooRTE.Tabs[a][b]||(MooRTE.Tabs[a][b]=
[]);MooRTE.Tabs[a][b][+(b!=Array.from(arguments).splice(-2,1))]=this},clipStickyWin:function(a){if(Browser.firefox||Browser.webkit&&a=="paste")window.AssetLoader&&AssetLoader.javascript(["mootools-more.js","StickyWinModalUI.js"],{onComplete:function(){MooRTE.Elements.clipPop=new StickyWin.Modal({content:StickyWin.ui("Security Restriction","For your protection, "+(Browser.webkit?"Webkit":"Firefox")+" does not allow access to the clipboard.<br/>\t\t\t\t\t\t<b>Please use Ctrl+C to copy, Ctrl+X to cut, and Ctrl+V to paste.</b><br/><br/>\t\t\t\t\t\tIf this functionality is important consider switching to Internet Explorer,<br/> which allows us to access [and modify] your system.",
{buttons:[{text:"close"}]})});MooRTE.Elements.clipPop.hide()}})},fontsize:function(a,b){if(b==undefined)b=window.document.queryCommandValue("fontsize")||MooRTE.Range.parent().getStyle("font-size");if(b==+b)b=+b+a;else{b=b.split(/([^\d]+)/)[0];[0,10,13,16,18,24,32,48].every(function(c,d){if(c<b)return true;b=!(c-b)||a<0?d+a:d})}MooRTE.Utilities.exec("fontsize",b)},clean:function(a,b){b=Object.append({xhtml:false,semantic:true,remove:""},b);var c=[[/(<(?:img|input)[^\/>]*)>/g,"$1 />"]],d=[[/<li>\s*<div>(.+?)<\/div><\/li>/g,
"<li>$1</li>"],[/<span style="font-weight: bold;">(.*)<\/span>/gi,"<strong>$1</strong>"],[/<span style="font-style: italic;">(.*)<\/span>/gi,"<em>$1</em>"],[/<b\b[^>]*>(.*?)<\/b[^>]*>/gi,"<strong>$1</strong>"],[/<i\b[^>]*>(.*?)<\/i[^>]*>/gi,"<em>$1</em>"],[/<u\b[^>]*>(.*?)<\/u[^>]*>/gi,'<span style="text-decoration: underline;">$1</span>'],[/<p>[\s\n]*(<(?:ul|ol)>.*?<\/(?:ul|ol)>)(.*?)<\/p>/ig,"$1<p>$2</p>"],[/<\/(ol|ul)>\s*(?!<(?:p|ol|ul|img).*?>)((?:<[^>]*>)?\w.*)$/g,"</$1><p>$2</p>"],[/<br[^>]*><\/p>/g,
"</p>"],[/<p>\s*(<img[^>]+>)\s*<\/p>/ig,"$1\n"],[/<p([^>]*)>(.*?)<\/p>(?!\n)/g,"<p$1>$2</p>\n"],[/<\/(ul|ol|p)>(?!\n)/g,"</$1>\n"],[/><li>/g,">\n\t<li>"],[/([^\n])<\/(ol|ul)>/g,"$1\n</$2>"],[/([^\n])<img/ig,"$1\n<img"],[/^\s*$/g,""]],f=[[/<br class\="webkit-block-placeholder">/gi,"<br />"],[/<span class="Apple-style-span">(.*)<\/span>/gi,"$1"],[/ class="Apple-style-span"/gi,""],[/<span style="">/gi,""],[/^([\w\s]+.*?)<div>/i,"<p>$1</p><div>"],[/<div>(.+?)<\/div>/ig,"<p>$1</p>"]],e=[[/<br\s*\/?>/gi,
"<br"+(c?"/":"")+">"],[/><br\/?>/g,">"],[/^<br\/?>/g,""],[/<br\/?>$/g,""],[/<br\/?>\s*<\/(h1|h2|h3|h4|h5|h6|li|p)/gi,"</$1"],[/<p>\s*<br\/?>\s*<\/p>/gi,"<p>\u00a0</p>"],[/<p>(&nbsp;|\s)*<\/p>/gi,"<p>\u00a0</p>"],[/<p>\W*<\/p>/g,""],[/<\/p>\s*<\/p>/g,"</p>"],[/<[^> ]*/g,function(g){return g.toLowerCase()}],[/<[^>]*>/g,function(g){return g=g.replace(/ [^=]+=/g,function(l){return l.toLowerCase()})}],[/<[^>]*>/g,function(g){return g=g.replace(/( [^=]+=)([^"][^ >]*)/g,'$1"$2"')}]],i;if(typeOf(a)=="element"){i=
a;var j=i.retrieve("bar");i.contains(j)&&i!=j&&i.moorte("remove")}else i=$("washer")||(new Element("div",{id:"washer"})).inject(document.body);i.getElements("p:empty"+(b.remove?","+b.remove:"")).destroy();Browser.firefox||i.getElements("p>p:only-child").each(function(g){var l=g.getParent();l.childNodes.length==1&&g.replaces(l)});a=i.get("html");i!=$("washer")&&i.moorte();c&&e.append(c);d&&e.append(d);Browser.webkit&&e.append(f);do{c=a;e.each(function(g){a=a.replace(g[0],g[1])})}while(c!=a);return a.trim()}};
MooRTE.extensions=function(){var a=Array.link(arguments,{options:Type.isObject,cmd:Type.isString,rte:Type.isElement}),b="detach,hide,remove,destroy".test(a.cmd,"i")?a.cmd.toLowerCase():"",c=Array.from(this);c.every(function(d,f){var e,i;d=c[f]=d.retrieve("new")||d;if(a.rte){e=a.rte.hasClass("MooRTE")?a.rte:a.rte.retrieve("bar");if(!e)return alert("Err 600: The passed in element is not connected to an RTE."),600;if(d.retrieve("bar")!=e){d.retrieve("bar").retrieve("fields").erase(d);d.store("bar",e);
e.retrieve("fields").include(d)}}else e=d.hasClass("MooRTE")?d:d.retrieve("bar");if(b){if(!e||d.retrieve("removed")||!d.getParent())return true}else if(e){if(e.hasClass("rteHide"))return e.removeClass("rteHide")}else{new MooRTE(Object.merge(a.options||{},{elements:this}));c[f]=d.retrieve("new")||d;return false}switch(b){case "hide":return e.addClass("rteHide");case "detach":if(d==e)return true;e.retrieve("fields").erase(d);i=[d];break;case "remove":if(e.retrieve("removed"))return true;e.store("removed",
e.getPrevious()?[e.getPrevious(),"after"]:[e.getParent(),"top"]);e.dispose();i=e.retrieve("fields");break;case "destroy":i=e.retrieve("fields");e=e.destroy();break;default:i=[d];if(removed=e.retrieve("removed")){i=e.retrieve("fields");e.inject(removed[0],removed[1]).eliminate("removed")}else if(d==e)return;i.each(function(j){e.retrieve("fields").include(j);var g=j.retrieve("src");if(g)g.getParent()&&j.set("html",g.get("value")).replaces(g);else{j.set("contentEditable",true);MooRTE.Utilities.addEvents(j,
j.retrieve("rteEvents"))}});return true}c[f]=d.retrieve("src")||d;i.each(function(j){Browser.firefox&&j.getElement("#rteMozFix")&&j.getElement("#rteMozFix").destroy();var g=j.retrieve("src");if(g){g.set("value",j.get("html")).replaces(j);if(!e){g.eliminate("new");j.destroy()}}else{j.set("contentEditable",false);MooRTE.Utilities.removeEvents(j,"destroy");e||j.eliminate("bar")}});return true}.bind(this));return c};Element.implement({moorte:MooRTE.extensions});Elements.implement({moorte:MooRTE.extensions});
MooRTE.Groups={Main:"Toolbar:[start,bold,italic,underline,strikethrough,Justify,Lists,Indents,subscript,superscript]",File:{Toolbar:["start","save","cut","copy","paste","redo","undo","selectall","removeformat","viewSource"]},Font:{Toolbar:["start","fontsize","decreasefontsize","increasefontsize","backcolor","forecolor"]},Sert:{Toolbar:["start","inserthorizontalrule","blockquote","hyperlink"]},RibbonOpts:{place:"Ribbons"}};
MooRTE.Elements={Main:{text:"Main","class":"rteText",onLoad:{tabs:[MooRTE.Groups.Main,"tabs1",null]},onClick:"onLoad"},File:{text:"File","class":"rteText rteFile",onClick:{tabs:[MooRTE.Groups.File,"tabs1",null]}},Font:{text:"Font","class":"rteText",onClick:{tabs:[MooRTE.Groups.Font,"tabs1",null]}},Insert:{text:"Insert","class":"rteText",onClick:{tabs:[MooRTE.Groups.Sert,"tabs1",null]}},View:{text:"Views","class":"rteText",onClick:{tabs:{Toolbar:["start","Html/Text"]}}},HomeTab:{text:"Home","class":"rteSelected",
onLoad:{addTab:["RibbonTabs"]},onClick:{tabs:["RibbonTabs","HomeRibbon",MooRTE.Groups.RibbonOpts]}},HomeRibbon:{element:"div",onLoad:{addTab:["RibbonTabs","HomeTab"]},contains:"div.rteFontGroup:[div:[bold,italic,underline,strikethrough,subscript]]\t\t\t \t\t\t\t\t,div.rteParaGroup:[div:[Lists,indent,outdent,justifyleft,justifycenter,justifyright,justifyfull]]\t\t\t \t\t\t\t\t,div.rteStylGroup:[div:[div.defaultStyle:[div]]]"},FileTab:{text:"File",onClick:{tabs:["RibbonTabs","FileRibbon",MooRTE.Groups.RibbonOpts]}},
FileRibbon:{element:"div",contains:"div.rteFileGroup:[div:[superscript]]"},Justify:{img:6,"class":"Flyout rteSelected",contains:"div.Flyout:[justifyleft,justifycenter,justifyright,justifyfull]"},Lists:{img:14,"class":"Flyout",contains:"div.Flyout:[insertorderedlist,insertunorderedlist]"},Indents:{img:11,"class":"Flyout",contains:"div.Flyout:[indent,outdent]"},bold:{img:1,shortcut:"b",source:"<b>"},italic:{img:2,shortcut:"i",source:"<i>"},underline:{img:3,shortcut:"u",source:"<u>"},strikethrough:{img:4},
justifyleft:{img:6,title:"Justify Left"},justifyfull:{img:7,title:"Justify Full"},justifycenter:{img:8,title:"Justify Center"},justifyright:{img:9,title:"Justify Right"},subscript:{img:18},superscript:{img:17},outdent:{img:11},indent:{img:12},insertorderedlist:{img:14,title:"Numbered List"},insertunorderedlist:{img:15,title:"Bulleted List"},selectall:{img:25,title:"Select All (Ctrl + A)"},removeformat:{img:26,title:"Clear Formatting"},undo:{img:31,title:"Undo (Ctrl + Z)"},redo:{img:32,title:"Redo (Ctrl+Y)"},
inserthorizontalrule:{img:56,title:"Insert Horizontal Line"},cut:{img:20,title:"Cut (Ctrl+X)",onLoad:MooRTE.Utilities.clipStickyWin,onClick:function(a){Browser.firefox?MooRTE.Elements.clipPop.show():MooRTE.Utilities.exec(a)}},copy:{img:21,title:"Copy (Ctrl+C)",onLoad:MooRTE.Utilities.clipStickyWin,onClick:function(a){Browser.firefox?MooRTE.Elements.clipPop.show():MooRTE.Utilities.exec(a)}},paste:{img:22,title:"Paste (Ctrl+V)",onLoad:MooRTE.Utilities.clipStickyWin,onClick:function(a){Browser.firefox||
Browser.webkit?MooRTE.Elements.clipPop.show():MooRTE.Utilities.exec(a)}},save:{img:27,src:"http://siteroller.net/test/save.php",onClick:function(){var a={page:window.location.pathname},b=0;a.content=[];this.getParent(".MooRTE").retrieve("fields").each(function(c){a.content[b++]=MooRTE.Utilities.clean(c)});(new Request({url:MooRTE.Elements.save.src,onComplete:function(c){alert("Your submission has been received:\n\n"+c)}})).send(Object.toQueryString(a))}},"Html/Text":{img:"26",onClick:["DisplayHTML"]},
DisplayHTML:{element:"textarea",unselectable:"off","class":"displayHtml",init:function(){var a=this.getParent(".MooRTE").retrieve("fields"),b=a.getParent();b=(b.hasClass("rteTextArea")?b:a).getSize();this.set({styles:{width:b.x,height:b.y},text:a.innerHTML.trim()})}},colorpicker:{element:"img",src:"images/colorPicker.jpg","class":"colorPicker",onClick:function(){var a=this.getSize().x/2,b=mouse.x-a,c=mouse.y-a,d=f.y/f.getSize().y,f=Math.atan2(b,c)/Math.PI*3+1;a=Math.sqrt(b*b+c*c)/a;for(b=0;b<3;b++)(void 0)[b]=
(((Math.abs((f+=2)%6-3)<1?1:h>2?0:-(h-2))-d)*a+d)*255;[(void 0)[0],(void 0)[2],(void 0)[1]].rgbToHex()}},hyperlink:{img:46,title:"Create hyperlink",onClick:function(){MooRTE.Range.create();$("popTXT").set("value",MooRTE.Range.get("text",MooRTE.ranges.a1));MooRTE.Elements.linkPop.show()},onLoad:function(){window.Asset&&new Asset.javascript("StickyWinModalUI.js",{self:this,onComplete:function(){MooRTE.Elements.linkPop=new StickyWin.Modal({content:StickyWin.ui("Edit Link","<span style='display:inline-block; width:100px'>Text of Link:</span><input id='popTXT'/><br/>\t\t\t\t\t\t\t\t\t\t\t\t<span style='display:inline-block; width:100px'>Link To Location:</span><input id='popURL'/><br/>\t\t\t\t\t\t\t\t\t\t\t\t<input type='radio' name='pURL'  value='web' checked/>Web<input type='radio' name='pURL' id='pURL1' value='email'/>Email",
{buttons:[{text:"cancel"},{text:"OK",onClick:function(){MooRTE.Range.set();var a=$("popURL").get("value");if($("pURL1").get("checked"))a="mailto:"+a;MooRTE.Utilities.exec(a?"createlink":"unlink",a)}}]})});MooRTE.Elements.linkPop.hide()}})}},mooupload:{img:15,onLoad:function(){new Asset.javascript(MooRTE.Path+"mooupload/Source/mooupload.js",{onComplete:function(){new MooUpload(this,{action:MooRTE.Path+"mooupload/Demo/upload.php",flash:{movie:MooRTE.Path+"mooupload/Source/Moo.Uploader.swf"},autostart:true,
accept:"image/*",onButtonDown:function(){MooRTE.Range.set()},onButtonEnter:function(){MooRTE.Range.create()},onFileUpload:function(a,b){var c=MooRTE.Path+"mooupload/Demo/tmp/"+b.upload_name;MooRTE.Range.set();MooRTE.Utilities.exec("insertimage",c)}})}.bind(this)})}},blockquote:{img:59,onClick:function(){MooRTE.Range.wrap("blockquote")}},start:{element:"span"},viewSource:{img:35,onClick:"source",source:function(a){var b=MooRTE.activeBar,c=b.retrieve("fields")[0],d=b.getElement("textarea.rtesource");
if(this.hasClass("rteSelected")){b.eliminate("source");this.removeClass("rteSelected");c.contains(c.retrieve("bar"))&&c.moorte("remove");c.set("html",d.addClass("rteHide").get("value")).moorte()}else{b.store("source","source");if(d){this.addClass("rteSelected");d.removeClass("rteHide").set("text",MooRTE.Utilities.clean(b.retrieve("fields")[0]))}else MooRTE.Utilities.group.apply(this,["source",a])}}},source:{element:"textarea","class":"displayHtml",unselectable:"off",onLoad:function(){var a=this.getParent(".MooRTE"),
b=a.retrieve("fields")[0],c=b.getSize();a=a.getSize().y;this.set({styles:{width:c.x,height:c.y-a,top:a},text:MooRTE.Utilities.clean(b)})}},input:{img:59,onClick:function(){MooRTE.Range.insert("<input>")}},submit:{img:59,onClick:function(){MooRTE.Range.insert('<input type="submit" value="Submit">')}},cleanWord:{onClick:function(){var a=this.replace(/\r/g,"\n").replace(/\n/g," ");[/<!--.+?--\>/g,/<title>.+?<\/title>/g,/<(meta|link|.?o:|.?style|.?div|.?head|.?html|body|.?body|.?span|!\[)[^>]*?>/g,/ v:.*?=".*?"/g,
/ style=".*?"/g,/ class=".*?"/g,/(&nbsp;){2,}/g,/<p>(\s|&nbsp;)*?<\/p>/g].each(function(b){a=a.replace(b,"")});return a.replace(/\s+/g," ")}},decreasefontsize:{img:42,onClick:function(){if(!Browser.firefox)return MooRTE.Utilities.fontsize.pass(-1)}()},increasefontsize:{img:41,onClick:function(){if(!Browser.firefox)return MooRTE.Utilities.fontsize.pass(1)}()},fontsize:{},insertimage:{},forecolor:{},formatblock:{},backcolor:{img:43,onLoad:function(){MooRTE.Utilities.assetLoader({scripts:["/siteroller/classes/colorpicker/Source/ColorRoller.js"],
styles:["/siteroller/classes/colorpicker/Source/ColorRoller.js"],onComplete:function(){}})},onClick:function(){}},Toolbar:{element:"div",title:""}};
